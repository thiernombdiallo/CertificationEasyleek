<app-dasboard-resto></app-dasboard-resto>

<section class="home-section">
<div>
    <div>
        <h3 class="text-center mt-2 fw-bold titremere-blog" >Listes des plats</h3>
        <div class="d-flex justify-content-between">
          <div>
            <button class="btn fw-bold  boutonajouter-blog" data-bs-toggle="modal" data-bs-target="#ajoutPlat" >Ajouter un plat</button>
          </div>
            <div class="search">
              <div class="input-group mb-3">
                  <input type="text" class="form-control inputPorteur" placeholder="Chercher un plat">
                  <button class="input-group-text iconsearch" id="basic-addon1"><i class="bi bi-search"></i></button>
              </div>
          </div>
        </div>
      </div>
    <!-- les contenue de la page avec les carte -->
  <div class="container mt-4 mb-5">
    <div class="row">
      <div class="col-12 col-md-4" *ngFor="let plat of plats">
        <div class="card border mb-2 rounded-4 ">
          <img [src]="plat.photo" class="img-fluid" alt="Image article">
          <div class="bodyArticle px-4">
            <h3 class="mt-3 text-center">{{ plat.titre }}</h3>
            <p class="limited-height">{{plat.description }}</p>
            <div class="btnArticle mb-3 d-flex justify-content-center">
              <button class="btn boutondetails-blog" (click)="showPlatDetails(plat)" data-bs-toggle="modal" data-bs-target="#detailArticle">DÃ©tails</button>
              <button class="btn mx-3 boutonmodif-blog" data-bs-toggle="modal" data-bs-target="#editPlatModal"
                (click)=" editPlat(plat)">Modifier</button>
              <button class="btn  boutonsupprim-blog" (click)="deletePlat(plat.id ?? -1)">Supprimer</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    </div>
    <!-- les contenue de la page avec les carte -->
      <!-- debut model d'ajoute d'un plat dans le blog --> 
      <div class="modal fade" id="ajoutPlat" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title w-100 fs-4 titreAjout text-center">Ajouter un Plat</h1>
              <button type="button" class="btn btn-closeAjout" data-bs-dismiss="modal" id="close-modal"><i class="bi bi-x-lg"></i></button>
            </div>
            <div class="modal-body">
                <form class="ajoutArticle" (ngSubmit)="addPlat()">
                  <div class="mb-3">
                    <label for="titreArticle">Titre du plat:</label>
                    <input class="form-control" type="text" id="titreArticle" name="libelle" [(ngModel)]="libelle" required>
                  </div>
                  <div class="mb-3">
                    <label for="titreArticle">Prix:</label>
                    <input class="form-control" type="number" id="titreArticle" name="prix" [(ngModel)]="prix" required>
                  </div>
      
                  <div class="mb-4">
                    <label for="inputImage" class="form-label">Image</label>
                    <input type="file" class="form-control" id="inputGroupFile02" name="image" (change)="getFile($event)" accept="image/*">
                  </div>
                
                  <div class="mb-3">
                    <label for="descriptionArticle">Description de l'article:</label>
                    <textarea class="form-control description-article" type="text" id="descriptif" name="descriptif"
                      [(ngModel)]="descriptif" required></textarea>
                  </div>

                  <div class="mb-3">
                    <label for="menu">Type de menu:</label>
                    <select id="menu" name="menu_id" [(ngModel)]="menu_id"  required>
                      <option *ngFor="let menuTitre of menus" [value]="menuTitre.id">{{ menuTitre.titre }}</option>
                    </select>
                  </div>
                  {{ menu_id }}

                  <button class="btn btn-add" type="submit">Ajouter</button>
                </form>
            </div>
          </div>
        </div>
      </div>
      <!-- fin du model d'ajoute d'un article dans le blog -->
    
  </div>
  </section>